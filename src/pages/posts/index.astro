---
import { getCollection } from 'astro:content';
import BaseLayout from '@layouts/Layout.astro';
import TerminalWindow from '@components/TerminalWindow.astro';

const posts = await getCollection('posts');
posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Posts | Genix">
  <TerminalWindow command="ls posts">
    <div class="space-y-6">
      {posts.map((post) => (
        <div class="space-y-2 pb-6 border-b border-gray-900 last:border-0">
          <div class="flex items-baseline gap-2">
            <a href={`/posts/${post.slug}`} 
               class="text-gray-300 hover:text-gray-100 transition-colors">
              {post.data.title}
            </a>
          </div>
          
          <div class="text-xs text-gray-600">
            {post.data.date.toLocaleDateString('en-US', { 
              year: 'numeric', 
              month: 'short', 
              day: 'numeric' 
            })}
          </div>
          
          <p class="text-sm text-gray-500 leading-relaxed">
            {post.data.description}
          </p>
          
          <div class="text-xs">
            <a href={`/posts/${post.slug}`} 
               class="text-gray-600 hover:text-gray-400 transition-colors">
              [read more]
            </a>
          </div>
        </div>
      ))}

      {posts.length === 0 && (
        <div class="text-center py-8 text-gray-600">
          <p>No posts found.</p>
        </div>
      )}
    </div>
  </TerminalWindow>
</BaseLayout>